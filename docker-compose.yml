version: '2'

labels:

    rocks.puffin.name: WordPress 
    rocks.puffin.subtitle: blog tool, publishing platform, and CMS 
    rocks.puffin.website: https://wordpress.org/ 
    rocks.puffin.description: |
        WordPress is web software you can use to create a beautiful website, blog, or app. 

services:

    main:
        image: loomchild/wordpress
        depends_on:
            - db
        ports:
            - 80
        volumes: 
            - main_data:/var/www/html
        environment:
            - VIRTUAL_HOST
            - VIRTUAL_PORT=80
            - WORDPRESS_DB_HOST=db
            - WORDPRESS_DB_PASSWORD=wordpress
        networks:
            - front
            - back
            - default
    
    db:
        image: loomchild/mariadb
        environment:
            MYSQL_ROOT_PASSWORD: wordpress
        volumes: 
            - db_data:/var/lib/mysql

volumes:
    main_data:
    db_data:

networks:
    front:
        external:
            name: "puffin_front"
    back:
        external:
            name: "puffin_back"
